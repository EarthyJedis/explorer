<!--
  ~ Polkascan Explorer UI
  ~ Copyright (C) 2018-2023 Polkascan Foundation (NL)
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<ng-container *ngIf="ns.currentNetwork | async">
  <div class="bgwhite">
    <ng-container *ngIf="(blocks | async)?.length === 0">
      <p class="colorwhite">Waiting for blocks...</p>
      <mat-progress-bar mode="buffer"></mat-progress-bar>
    </ng-container>
    <div class="last-block" *ngIf="((latestBlockNumber | async) || 0) > 0">
      {{ latestBlockNumber | async }}
    </div>

    <div class="blocks" [@blocksAnimation]="latestBlockNumber | async">
      <div class="block-outer" *ngFor="let block$ of blocks | async">
        <ng-container *ngIf="block$ | async as block">
          <a
            class="block-inner"
            [class.finalized]="block.finalized"
            [routerLink]="'block/' + block.number"
            [@blockContentAnimation]="block.extrinsics.length"
          >
            <span class="number">
              {{ block.number.toString().slice(0, -2)
              }}<strong>{{ block.number.toString().slice(-2) }}</strong>
            </span>
            <span class="transaction" *ngFor="let i of block.extrinsics"></span>
            <span class="event" *ngFor="let i of block.events"></span>
          </a>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="wrap animate pop">
    <div class="overlay">
      <div class="overlay-content animate slide-left delay-2">
        <h1 class="animate slide-left pop delay-4">Earthy</h1>
        <p
          class="animate slide-left pop delay-5"
          style="color: white; margin-bottom: 2.5rem"
        >
          <em>Be The Change</em>
        </p>
      </div>
      <div class="image-content animate slide delay-5"></div>
    </div>
    <div class="text">
      <img
        class="inset"
        src="https://i.ibb.co/YWfXw6R/logo.png"
        alt="Earthy's Logo"
      />

      <p>
        Welcome to Earthy's Block Explorer, we are not just redefining the type
        of impact web3 & blockchain have on people but fundamentally shifting
        humanity forward.
      </p>

      <p>
        As we finalize Earthy's development, we're thrilled to give you a sneak
        peek through our testnet. Here, you'll witness a layer-one blockchain
        designed for both scalability and real-world impact.
      </p>

      <p>
        Our immutable ledger brings unprecedented transparency to charitable
        contributions. Now you can track every donation from donor to
        beneficiary.
      </p>

      <p>
        Earthy also equips humanitarian organizations with the tools they need
        for humanitarian initiatives, from advanced smart contracts to
        decentralized apps.
      </p>

      <p>
        We're proud to introduce Proof of Planting, Earthy's proprietary
        consensus mechanism. This groundbreaking feature achieves consensus by
        funding real-world environmental projects.
      </p>

      <p>
        We're in the final stages of launching our mainnet. Be a part of the
        transition as we move from testnet to a fully functional product capable
        of societal change.
      </p>

      <p>
        Become an early adopter, impact the world, and join a community of
        visionaries, humanitarians, and thought leaders.
      </p>

      <p>
        <a href="https://discord.gg/eyFkPaDe" target="_blank"
          >Join Our Community</a
        >
      </p>
    </div>
  </div>
</ng-container>

<p
  *ngIf="
    (ns.currentNetwork | async) === '' &&
    (((pa.substrateRpcRegistered | async) &&
      (pa.substrateRpcConnected | async) === false) ||
      (pa.substrateRpcRegistered | async) === false)
  "
>
  Initializing...
</p>

<p
  *ngIf="
    (pa.substrateRpcRegistered | async) === false &&
    (pa.explorerRegistered | async) === false &&
    (pa.subsquidRegistered | async) === false
  "
  style="color: red"
>
  Connection error! Please try again later or try a different endpoint.
</p>
